DB

Tables

categories table:
CREATE TABLE [dbo].[categories] (
    [cat_id]   INT           IDENTITY (1, 1) NOT NULL,
    [cat_name] NVARCHAR (20) NOT NULL,
    [cat_des]  NVARCHAR (60) NULL,
    [par_id]   INT           DEFAULT ((0)) NULL,
    PRIMARY KEY CLUSTERED ([cat_id] ASC),
    FOREIGN KEY ([par_id]) REFERENCES [dbo].[categories] ([cat_id])
);


question table:
CREATE TABLE [dbo].[question] (
    [questions]    VARCHAR (255) NULL,
    [parent_key]   VARCHAR (255) NULL,
    [moreinfo]     VARCHAR (255) NULL,
    [question_key] VARCHAR (255) NOT NULL,
    [isvisualized] BIT           NULL,
    PRIMARY KEY CLUSTERED ([question_key] ASC)
);


service_prividers_ref table:
CREATE TABLE [dbo].[service_prividers_ref] (
    [sp_id]      INT           IDENTITY (1, 1) NOT NULL,
    [user_id]    INT           NULL,
    [service_id] VARCHAR (255) NULL,
    PRIMARY KEY CLUSTERED ([sp_id] ASC),
    CONSTRAINT [fk_userid] FOREIGN KEY ([user_id]) REFERENCES [dbo].[users] ([user_id]),
    CONSTRAINT [fk_serviceid] FOREIGN KEY ([service_id]) REFERENCES [dbo].[question] ([question_key])
);

services table:
CREATE TABLE [dbo].[services] (
    [id]       INT           NULL,
    [title]    VARCHAR (255) NULL,
    [category] VARCHAR (255) NULL
);


user_address table:
CREATE TABLE [dbo].[user_address] (
    [address_id] INT            IDENTITY (1, 1) NOT NULL,
    [login_name] NVARCHAR (40)  NULL,
    [address_1]  NVARCHAR (120) NOT NULL,
    [address_2]  NVARCHAR (120) NULL,
    [address_3]  NVARCHAR (120) NULL,
    [city_name]  NVARCHAR (50)  NOT NULL,
    [state_name] NVARCHAR (20)  NOT NULL,
    [Country]    NVARCHAR (20)  NOT NULL,
    [PLZ]        INT            NOT NULL,
    PRIMARY KEY CLUSTERED ([address_id] ASC),
    FOREIGN KEY ([login_name]) REFERENCES [dbo].[users] ([login_name])
);

users table:
CREATE TABLE [dbo].[users] (
    [user_id]         INT              IDENTITY (1, 1) NOT NULL,
    [login_name]      NVARCHAR (40)    NOT NULL,
    [password_hash]   BINARY (64)      NOT NULL,
    [first_name]      NVARCHAR (40)    NULL,
    [last_name]       NVARCHAR (40)    NULL,
    [Salt]            UNIQUEIDENTIFIER NULL,
    [email]           NVARCHAR (50)    NOT NULL,
    [admin_rights]    BIT              DEFAULT ((0)) NULL,
    [profile_pic_url] NVARCHAR (255)   NULL,
    PRIMARY KEY CLUSTERED ([user_id] ASC),
    UNIQUE NONCLUSTERED ([email] ASC),
    UNIQUE NONCLUSTERED ([login_name] ASC)
);

verbal_answer table:
CREATE TABLE [dbo].[verbal_answer] (
    [question_key]   VARCHAR (255) NULL,
    [txt]            VARCHAR (255) NULL,
    [id]             INT           NOT NULL,
    [next_slide_key] VARCHAR (255) NULL,
    PRIMARY KEY CLUSTERED ([id] ASC),
    FOREIGN KEY ([question_key]) REFERENCES [dbo].[question] ([question_key])
);


visual_answer table:
CREATE TABLE [dbo].[visual_answer] (
    [question_key]      VARCHAR (255) NULL,
    [image_description] VARCHAR (255) NULL,
    [id]                INT           NOT NULL,
    [next_slide_key]    VARCHAR (255) NULL,
    [image_caption]     VARCHAR (255) NULL,
    [image_url]         VARCHAR (255) NULL,
    PRIMARY KEY CLUSTERED ([id] ASC),
    FOREIGN KEY ([question_key]) REFERENCES [dbo].[question] ([question_key])
);




